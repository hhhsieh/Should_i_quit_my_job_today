const translations = {
  'zh-TW': {
    title:            'ä»Šå¤©è©²é›¢è·äº†å—ï¼Ÿ',
    startBtn:         'é–‹å§‹',
    navHome:          'ğŸ’­ é›¢è·å—ï¼Ÿ',
    navRanking:       'ğŸ† æ’è¡Œæ¦œ',
    navAbout:         'â„¹ï¸ é—œæ–¼',
    footer:           'Â© 2025 ä»Šå¤©è©²é›¢è·äº†å—ï¼Ÿæ­¡è¿åˆ†äº«ç¶²å€ï¼Œä½†ç¦æ­¢æœªç¶“æˆæ¬Šçš„å…§å®¹é‡è£½æˆ–å•†æ¥­ä½¿ç”¨ã€‚',
    msgOOO:           'å»æé›¢è·å§ï¼ é‚„æ²’è¾¦æ³•ä¸‹å®šæ±ºå¿ƒè¦ä¸è¦å»æé›¢è·çš„è©±ä¸ç„¶è©¦è©¦çœ‹æœƒä¸æœƒé€£çºŒå¾—åˆ°ä¸‰å€‹ï¼¯ğŸ˜‰',
    msgXXX:           'æ©Ÿç‡åªæœ‰ 1% ä½ é‚„æ˜¯æŠ½åˆ°äº†â€¦å†æ’å¹¾å¤©å§ğŸ˜‰',
    msgXOX:           'ã„¨ã„šËŠ ä¸æ˜¯ï¼¯ï¼¯ï¼¯ï¼Œå†è©¦ä¸€æ¬¡å§',
    msgOXO:           'ã„¨ã„šËŠ ä¸æ˜¯ï¼¯ï¼¯ï¼¯ï¼Œå†è©¦ä¸€æ¬¡å§',
    msgXOO:           'ã„¨ã„šËŠ ä¸æ˜¯ï¼¯ï¼¯ï¼¯ï¼Œå†è©¦ä¸€æ¬¡å§',
    msgOOX:           'ã„¨ã„šËŠ ä¸æ˜¯ï¼¯ï¼¯ï¼¯ï¼Œå†è©¦ä¸€æ¬¡å§',
    msgOXX:           'ã„¨ã„šËŠ ä¸æ˜¯ï¼¯ï¼¯ï¼¯ï¼Œå†è©¦ä¸€æ¬¡å§',
    msgXXO:           'ã„¨ã„šËŠ ä¸æ˜¯ï¼¯ï¼¯ï¼¯ï¼Œå†è©¦ä¸€æ¬¡å§',
    msgTwoO:          'é€£çºŒå…©å€‹ï¼¯äº†ï¼Œè¦ä¸è¦æ¹Šæ¹Šçœ‹é€£çºŒä¸‰æ¬¡ï¼Œæˆ–è¨±æœƒæœ‰é©šå–œï¼ˆï¼Ÿï¼Ÿï¼Ÿï¼‰ ',
    msgTwoX:          'ã„¨ã„šËŠ ä¸æ˜¯ï¼¯ï¼¯ï¼¯ï¼Œå†è©¦ä¸€æ¬¡å§',
    msgChaos:         'å†è©¦ä¸€æ¬¡',
    msgConsecutiveOOO:'æ­å–œä½ é€£çºŒæŠ½åˆ°ä¸‰å€‹ï¼¯ï¼Œä½ æ˜¯ä¸æ˜¯çœŸçš„å¾ˆé–’å¾ˆä¸æƒ³ä¸Šç­å•Šï¼ˆå·å·å‘Šè¨´ä½ é€™å€‹æ©Ÿç‡åªæœ‰1%ï¼‰ï¼Œ',

    // Ranking å°ˆç”¨
    titleRanking:     'ä»Šå¤©æƒ³é›¢è·çš„ç†ç”±',
    rangeToday:       'ä»Šå¤©',
    rangeWeek:        'æœ¬é€±',
    rangeAll:         'å…¨éƒ¨',
    sortPopular:      'ğŸ”¥ æœ€å¤šï¼‹',
    sortLatest:       'ğŸ†• æœ€æ–°ç•™è¨€ ',
    modalTitle:       'å¯«ä¸‹ä½ çš„é›¢è·ç†ç”±ï¼š',
    modalPlaceholder: 'ä¾‹å¦‚ï¼šæˆ‘é€£å¤¢è£¡éƒ½åœ¨é–‹æœƒ...',
    btnSend:          'é€å‡º',
    btnCancel:        'å–æ¶ˆ',

    // About å°ˆç”¨
    titleAbout:       'é—œæ–¼æœ¬ç«™ï½œä»Šå¤©è©²é›¢è·äº†å—ï¼Ÿ',
    letterMeta:       'Toï¼šæ‰€æœ‰ååœ¨è¾¦å…¬æ¡Œå‰æƒ³é›¢è·çš„ä½ ',
    letterTitle:      'ã€Œä»Šå¤©è©²é›¢è·äº†å—ï¼Ÿã€',
    aboutP1:          'é€™æ˜¯ä¸€å€‹çµ¦è·å ´äººçš„å¹½é»˜äº’å‹•ç¶²ç«™ã€‚<br />å¦‚æœä½ æ­£åœ¨å·¥ä½œã€æœƒè­°ã€æˆ–å­ä¸–çš„åˆä¼‘ä¸­çªç„¶æ‡·ç–‘äººç”Ÿï¼Œ<br />é€™è£¡å°±æ˜¯ä½ è©²ä¾†çš„åœ°æ–¹ã€‚',
    aboutP2:          'é›–ç„¶ä¸æ˜¯æˆ‘åœ¨ä¸Šç­ï¼Œä½†æˆ‘èº«é‚Šçš„äººéƒ½åœ¨ä¸Šç­ï¼Œè€Œä¸”å¹¾ä¹æ¯å¤©éƒ½æƒ³é›¢è·ã€‚<br />æœ‰äººå› ç‚ºä¸»ç®¡ã€æœ‰äººå› ç‚ºé–‹ä¸å®Œçš„æœƒã€<br />ä¹Ÿæœ‰äººåªæ˜¯å–®ç´”â€¦â€¦è¦ºå¾—æ´»è‘—å¾ˆç´¯ã€‚<br />æ‰€ä»¥æˆ‘åšäº†é€™å€‹ç¶²ç«™ï¼Œå¸Œæœ›å¯ä»¥ç•¶æˆå¤§å®¶ä¸Šç­ä¸Šå¾—å¾ˆç´¯çš„æ™‚å€™çš„ä¸€é»æ•‘è´–ã€‚',
    aboutP3:          'é€™å€‹ç¶²ç«™å¯ä»¥å¹¹å˜›ï¼Ÿ<br />ğŸ² é›¢è·ç†ç”±ç”¢ç”Ÿå™¨ï¼šç”Ÿæˆä¸€å¥ã€Œè½èµ·ä¾†åˆç†åˆå¾ˆè’è¬¬ã€çš„ç†ç”±ã€‚<br />ğŸ”º +1ï¼šçœ‹åˆ°æœ‰å…±é³´çš„ç†ç”±å¯ä»¥æŠ•ç¥¨ï¼Œé †ä¾¿æ¨çˆ†å®ƒã€‚<br />ğŸ† æ’è¡Œæ¦œï¼šçœ‹çœ‹å¤§å®¶éƒ½æƒ³å› ç‚ºä»€éº¼è€Œé›¢è·ã€‚<br />âœï¸ æŠ•ç¨¿å€ï¼šä½ ä¹Ÿå¯ä»¥åŒ¿ååˆ†äº«ä½ çš„çˆ†æ°£ç¬é–“ã€‚',
    aboutP4:          '<strong>æˆ‘å€‘ä¸æ˜¯çœŸçš„è¦ä½ é›¢è·ã€‚</strong><br />ä½†æœ‰æ™‚å€™æƒ…ç·’éœ€è¦å‡ºå£ï¼Œæœ‰æ™‚å€™å¹½é»˜æ¯”æ­£ç¶“æ›´æœ‰åŠ›ã€‚<br />å¦‚æœä½ ç¬‘äº†ï¼Œé‚£å°±å€¼äº†ã€‚',
    aboutP5:          'æˆ‘æ˜¯ UX è¨­è¨ˆèƒŒæ™¯ï¼Œå–œæ­¡è¨­è¨ˆä¸€äº›çµåˆ <strong>æƒ…ç·’ Ã— äº’å‹• Ã— æ—¥å¸¸æ–‡åŒ–</strong> çš„å°å°ˆæ¡ˆã€‚<br />å¦‚æœä½ å–œæ­¡é€™å€‹ç¶²ç«™ï¼Œæˆ–æƒ³èŠèŠé›¢è·ã€è¨­è¨ˆã€äººç”Ÿè¿·æƒ˜â€”â€”<br />æ­¡è¿ä¾†ä¿¡èŠèŠï¼Œä¹Ÿæ­¡è¿åˆ†äº«å‡ºå»ã€‚',
    letterSign:       'æ•¬ä¸Šï¼Œ<br /><strong>ä»Šå¤©è©²é›¢è·äº†å—ï¼Ÿåœ˜éšŠ</strong><br />ğŸ“® hello@iquit.today'
  },
  'en': {
    title:            'Should I quit today?',
    startBtn:         'START',
    navHome:          'ğŸ’­ Quit?',
    navRanking:       'ğŸ† Ranking',
    navAbout:         'â„¹ï¸ About',
    footer:           'Â© 2025 Should I quit today? Share the link, but unauthorized reproduction or commercial use is prohibited.',
    msgOOO:           'Go ahead and quit right now!!!',
    msgXXX:           'A 1% chance but you got itâ€¦ hang in there a few more days ğŸ˜‰',
    msgXOX:           'ğŸ˜µ Hang in there, things might turn around?',
    msgOXO:           'ğŸ’¡ You still have hopeâ€”donâ€™t rush.',
    msgXOO:           'ğŸŒ€ Feeling shaken but still have some strength.',
    msgOOX:           'ğŸ¤” A bit uneasy, but not hopeless yet.',
    msgOXX:           'ğŸ˜“ Your heartâ€™s not at work anymore.',
    msgXXO:           'ğŸ˜© Itâ€™s getting hard to keep going.',
    msgTwoO:          'Two Oâ€™s? Maybe you should quit?',
    msgTwoX:          'ğŸ˜© Feeling downâ€”hold on a bit longer.',
    msgChaos:         'ğŸŒ€ Fate is chaoticâ€”try again.',
    msgConsecutiveOOO:'Youâ€™ve hit OOO three times in a rowâ€”quit right now!',

    // Ranking å°ˆç”¨
    titleRanking:     'Quit Reasons by Everyone',
    rangeToday:       'Today',
    rangeWeek:        'This Week',
    rangeAll:         'All Time',
    sortPopular:      'ğŸ”¥ Most +',
    sortLatest:       'ğŸ†• Latest',
    modalTitle:       'Write your quit reason:',
    modalPlaceholder: 'e.g.: Iâ€™m even in meetings in my dreams...',
    btnSend:          'Send',
    btnCancel:        'Cancel',

    // About å°ˆç”¨
    titleAbout:       'Aboutï½œShould I Quit Today?',
    letterMeta:       'To: Anyone at their desk pondering resignation',
    letterTitle:      '"Should I Quit Today?"',
    aboutP1:          'Welcome to a humorous interactive site for professionals.<br />When you find yourself at work, in meetings, or during a bleak lunch break questioning life,<br />this is the place to be.',
    aboutP2:          'Though Iâ€™m not the one working, everyone around me is, and almost daily they think about quitting.<br />Some blame their managers, some blame endless meetings,<br />and others simply feel that life is exhausting.<br />So I created this site as a small refuge when work becomes overwhelming.',
    aboutP3:          'What can you do here?<br />ğŸ² Quit Reason Generator: Produces a â€œplausible yet absurdâ€ reason to quit.<br />ğŸ”º +1: Upvote reasons that resonate and boost them.<br />ğŸ† Ranking: See the most popular quit reasons.<br />âœï¸ Submit: Anonymously share your own venting moment.',
    aboutP4:          '<strong>Weâ€™re not actually telling you to quit.</strong><br />Sometimes you need an outlet, and humor is more powerful than seriousness.<br />If it makes you laugh, itâ€™s worth it.',
    aboutP5:          'As a UX designer, I love projects that blend <strong>emotion Ã— interaction Ã— everyday culture</strong>.<br />If you enjoy this site or want to chat about quitting, design, or lifeâ€™s uncertainties,<br />feel free to reach out or share it with others.',
    letterSign:       'Sincerely,<br /><strong>The Should I Quit Today Team</strong><br />ğŸ“® hello@iquit.today'
  }
};

// â”€â”€â”€ äºŒã€ç¿»è­¯å‡½å¼ï¼šæŠŠæ‰€æœ‰ data-i18n å…ƒç´ å¥—ä¸Šå°æ‡‰æ–‡å­— â”€â”€â”€
function applyTranslations(lang) {
  // 1. æ›´æ–° <html lang="â€¦">
  document.documentElement.setAttribute('lang', lang);

  // 2. æ›¿æ›æ¯å€‹å¸¶ data-i18n çš„å…ƒç´ 
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    const txt = translations[lang]?.[key];
    if (!txt) return;

    // å¦‚æœæ˜¯ <input> æˆ– <textarea>ï¼Œå°±æ”¹ placeholder
    if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && 'placeholder' in el) {
      el.placeholder = txt;
    } else {
      el.innerHTML = txt;
    }
  });
}

// â”€â”€â”€ ä¸‰ã€DOM è¼‰å…¥å¾Œï¼šå…ˆç¿»è­¯ã€å†ç¶å®šã€Œåˆ‡èªç³»ã€ï¼‹ã€Œæ¼¢å ¡é¸å–®ã€â”€â”€â”€
document.addEventListener('DOMContentLoaded', () => {
  // 1. å…ˆè®€ localStorage.langï¼Œè‹¥æ²’ï¼Œå°±çœ‹ç€è¦½å™¨èªè¨€ï¼Œé è¨­ zh-TW æˆ– en
  let lang = localStorage.getItem('lang');
  if (!lang) {
    const navLang = navigator.language || navigator.userLanguage || 'zh-TW';
    lang = navLang.startsWith('en') ? 'en' : 'zh-TW';
    localStorage.setItem('lang', lang);
  }

  // 2. ä¸€è¼‰å…¥å°±å‘¼å« applyTranslationsï¼Œæ•´é æ–‡å­—æ›æˆå°æ‡‰èªç³»
  applyTranslations(lang);

  // 3. ç¶å®šã€Œåˆ‡èªç³»ã€åŠŸèƒ½ï¼š.lang-option å°±æ˜¯ä½  HTML è£¡çš„å…©å€‹ <div class="lang-option" data-lang="â€¦">
  document.querySelectorAll('.lang-option').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.getAttribute('data-lang'); // "zh-TW" æˆ– "en"
      localStorage.setItem('lang', newLang);
      // é‡è¼‰æ•´é ï¼Œè®“ applyTranslations å†è·‘ä¸€æ¬¡
      window.location.reload();
    });
  });

  // 4. ç¶å®šã€Œæ¼¢å ¡é¸å–® + é®ç½©ã€ï¼š
  initHamburger();
});

// â”€â”€â”€ å››ã€æ¼¢å ¡é¸å–® + é®ç½© å…±ç”¨é‚è¼¯â”€â”€â”€
function initHamburger() {
  const menuBtn  = document.getElementById('hamburger-menu-btn');
  const closeBtn = document.getElementById('menu-close');
  const sideMenu = document.getElementById('side-menu');
  const overlay  = document.getElementById('overlay');

  function openMenu() {
    sideMenu?.classList.add('show');
    overlay?.classList.add('show');
  }
  function closeMenu() {
    sideMenu?.classList.remove('show');
    overlay?.classList.remove('show');
  }

  menuBtn?.addEventListener('click', openMenu);
  closeBtn?.addEventListener('click', closeMenu);
  overlay?.addEventListener('click', closeMenu);
}
