const translations = {
  'zh-TW': {
    title:            '今天該離職了嗎？',
    startBtn:         '開始',
    navHome:          '💭 離職嗎？',
    navRanking:       '🏆 排行榜',
    navAbout:         'ℹ️ 關於',
    footer:           '© 2025 今天該離職了嗎？歡迎分享網址，但禁止未經授權的內容重製或商業使用。',
    msgOOO:           '去提離職吧！ 還沒辦法下定決心要不要去提離職的話不然試試看會不會連續得到三個Ｏ😉',
    msgXXX:           '機率只有 1% 你還是抽到了…再撐幾天吧😉',
    msgXOX:           'ㄨㄚˊ 不是ＯＯＯ，再試一次吧',
    msgOXO:           'ㄨㄚˊ 不是ＯＯＯ，再試一次吧',
    msgXOO:           'ㄨㄚˊ 不是ＯＯＯ，再試一次吧',
    msgOOX:           'ㄨㄚˊ 不是ＯＯＯ，再試一次吧',
    msgOXX:           'ㄨㄚˊ 不是ＯＯＯ，再試一次吧',
    msgXXO:           'ㄨㄚˊ 不是ＯＯＯ，再試一次吧',
    msgTwoO:          '連續兩個Ｏ了，要不要湊湊看連續三次，或許會有驚喜（？？？） ',
    msgTwoX:          'ㄨㄚˊ 不是ＯＯＯ，再試一次吧',
    msgChaos:         '再試一次',
    msgConsecutiveOOO:'恭喜你連續抽到三個Ｏ，你是不是真的很閒很不想上班啊（偷偷告訴你這個機率只有1%），',

    // Ranking 專用
    titleRanking:     '今天想離職的理由',
    rangeToday:       '今天',
    rangeWeek:        '本週',
    rangeAll:         '全部',
    sortPopular:      '🔥 最多＋',
    sortLatest:       '🆕 最新留言 ',
    modalTitle:       '寫下你的離職理由：',
    modalPlaceholder: '例如：我連夢裡都在開會...',
    btnSend:          '送出',
    btnCancel:        '取消',

    // About 專用
    titleAbout:       '關於本站｜今天該離職了嗎？',
    letterMeta:       'To：所有坐在辦公桌前想離職的你',
    letterTitle:      '「今天該離職了嗎？」',
    aboutP1:          '這是一個給職場人的幽默互動網站。<br />如果你正在工作、會議、或厭世的午休中突然懷疑人生，<br />這裡就是你該來的地方。',
    aboutP2:          '雖然不是我在上班，但我身邊的人都在上班，而且幾乎每天都想離職。<br />有人因為主管、有人因為開不完的會、<br />也有人只是單純……覺得活著很累。<br />所以我做了這個網站，希望可以當成大家上班上得很累的時候的一點救贖。',
    aboutP3:          '這個網站可以幹嘛？<br />🎲 離職理由產生器：生成一句「聽起來合理又很荒謬」的理由。<br />🔺 +1：看到有共鳴的理由可以投票，順便推爆它。<br />🏆 排行榜：看看大家都想因為什麼而離職。<br />✍️ 投稿區：你也可以匿名分享你的爆氣瞬間。',
    aboutP4:          '<strong>我們不是真的要你離職。</strong><br />但有時候情緒需要出口，有時候幽默比正經更有力。<br />如果你笑了，那就值了。',
    aboutP5:          '我是 UX 設計背景，喜歡設計一些結合 <strong>情緒 × 互動 × 日常文化</strong> 的小專案。<br />如果你喜歡這個網站，或想聊聊離職、設計、人生迷惘——<br />歡迎來信聊聊，也歡迎分享出去。',
    letterSign:       '敬上，<br /><strong>今天該離職了嗎？團隊</strong><br />📮 hello@iquit.today'
  },
  'en': {
    title:            'Should I quit today?',
    startBtn:         'START',
    navHome:          '💭 Quit?',
    navRanking:       '🏆 Ranking',
    navAbout:         'ℹ️ About',
    footer:           '© 2025 Should I quit today? Share the link, but unauthorized reproduction or commercial use is prohibited.',
    msgOOO:           'Go ahead and quit right now!!!',
    msgXXX:           'A 1% chance but you got it… hang in there a few more days 😉',
    msgXOX:           '😵 Hang in there, things might turn around?',
    msgOXO:           '💡 You still have hope—don’t rush.',
    msgXOO:           '🌀 Feeling shaken but still have some strength.',
    msgOOX:           '🤔 A bit uneasy, but not hopeless yet.',
    msgOXX:           '😓 Your heart’s not at work anymore.',
    msgXXO:           '😩 It’s getting hard to keep going.',
    msgTwoO:          'Two O’s? Maybe you should quit?',
    msgTwoX:          '😩 Feeling down—hold on a bit longer.',
    msgChaos:         '🌀 Fate is chaotic—try again.',
    msgConsecutiveOOO:'You’ve hit OOO three times in a row—quit right now!',

    // Ranking 專用
    titleRanking:     'Quit Reasons by Everyone',
    rangeToday:       'Today',
    rangeWeek:        'This Week',
    rangeAll:         'All Time',
    sortPopular:      '🔥 Most +',
    sortLatest:       '🆕 Latest',
    modalTitle:       'Write your quit reason:',
    modalPlaceholder: 'e.g.: I’m even in meetings in my dreams...',
    btnSend:          'Send',
    btnCancel:        'Cancel',

    // About 專用
    titleAbout:       'About｜Should I Quit Today?',
    letterMeta:       'To: Anyone at their desk pondering resignation',
    letterTitle:      '"Should I Quit Today?"',
    aboutP1:          'Welcome to a humorous interactive site for professionals.<br />When you find yourself at work, in meetings, or during a bleak lunch break questioning life,<br />this is the place to be.',
    aboutP2:          'Though I’m not the one working, everyone around me is, and almost daily they think about quitting.<br />Some blame their managers, some blame endless meetings,<br />and others simply feel that life is exhausting.<br />So I created this site as a small refuge when work becomes overwhelming.',
    aboutP3:          'What can you do here?<br />🎲 Quit Reason Generator: Produces a “plausible yet absurd” reason to quit.<br />🔺 +1: Upvote reasons that resonate and boost them.<br />🏆 Ranking: See the most popular quit reasons.<br />✍️ Submit: Anonymously share your own venting moment.',
    aboutP4:          '<strong>We’re not actually telling you to quit.</strong><br />Sometimes you need an outlet, and humor is more powerful than seriousness.<br />If it makes you laugh, it’s worth it.',
    aboutP5:          'As a UX designer, I love projects that blend <strong>emotion × interaction × everyday culture</strong>.<br />If you enjoy this site or want to chat about quitting, design, or life’s uncertainties,<br />feel free to reach out or share it with others.',
    letterSign:       'Sincerely,<br /><strong>The Should I Quit Today Team</strong><br />📮 hello@iquit.today'
  }
};

// ─── 二、翻譯函式：把所有 data-i18n 元素套上對應文字 ───
function applyTranslations(lang) {
  // 1. 更新 <html lang="…">
  document.documentElement.setAttribute('lang', lang);

  // 2. 替換每個帶 data-i18n 的元素
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    const txt = translations[lang]?.[key];
    if (!txt) return;

    // 如果是 <input> 或 <textarea>，就改 placeholder
    if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && 'placeholder' in el) {
      el.placeholder = txt;
    } else {
      el.innerHTML = txt;
    }
  });
}

// ─── 三、DOM 載入後：先翻譯、再綁定「切語系」＋「漢堡選單」───
document.addEventListener('DOMContentLoaded', () => {
  // 1. 先讀 localStorage.lang，若沒，就看瀏覽器語言，預設 zh-TW 或 en
  let lang = localStorage.getItem('lang');
  if (!lang) {
    const navLang = navigator.language || navigator.userLanguage || 'zh-TW';
    lang = navLang.startsWith('en') ? 'en' : 'zh-TW';
    localStorage.setItem('lang', lang);
  }

  // 2. 一載入就呼叫 applyTranslations，整頁文字換成對應語系
  applyTranslations(lang);

  // 3. 綁定「切語系」功能：.lang-option 就是你 HTML 裡的兩個 <div class="lang-option" data-lang="…">
  document.querySelectorAll('.lang-option').forEach(btn => {
    btn.addEventListener('click', () => {
      const newLang = btn.getAttribute('data-lang'); // "zh-TW" 或 "en"
      localStorage.setItem('lang', newLang);
      // 重載整頁，讓 applyTranslations 再跑一次
      window.location.reload();
    });
  });

  // 4. 綁定「漢堡選單 + 遮罩」：
  initHamburger();
});

// ─── 四、漢堡選單 + 遮罩 共用邏輯───
function initHamburger() {
  const menuBtn  = document.getElementById('hamburger-menu-btn');
  const closeBtn = document.getElementById('menu-close');
  const sideMenu = document.getElementById('side-menu');
  const overlay  = document.getElementById('overlay');

  function openMenu() {
    sideMenu?.classList.add('show');
    overlay?.classList.add('show');
  }
  function closeMenu() {
    sideMenu?.classList.remove('show');
    overlay?.classList.remove('show');
  }

  menuBtn?.addEventListener('click', openMenu);
  closeBtn?.addEventListener('click', closeMenu);
  overlay?.addEventListener('click', closeMenu);
}
